{"ast":null,"code":"var _jsxFileName = \"E:\\\\git_projects\\\\DataVizPro\\\\frontend\\\\src\\\\components\\\\file\\\\FileUploader.js\",\n  _s = $RefreshSig$();\nimport React, { useCallback, useState } from 'react';\nimport { useDropzone } from 'react-dropzone';\nimport { Box, Typography, LinearProgress, Alert, Paper } from '@mui/material';\nimport CloudUploadIcon from '@mui/icons-material/CloudUpload';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction FileUploader({\n  onUploadSuccess,\n  allowedTypes\n}) {\n  _s();\n  const [uploadProgress, setUploadProgress] = useState(0);\n  const [error, setError] = useState(null);\n  const [success, setSuccess] = useState(false);\n  const onDrop = useCallback(async acceptedFiles => {\n    const file = acceptedFiles[0]; // Handle one file at a time\n    console.log('File dropped:', file);\n    if (!allowedTypes.includes(file.type)) {\n      setError(`File type not supported. Please upload ${allowedTypes.join(', ')} files.`);\n      return;\n    }\n    try {\n      setError(null);\n      setSuccess(false);\n      setUploadProgress(0);\n      const formData = new FormData();\n      formData.append('file', file);\n      console.log('Uploading file to server...');\n      const response = await fetch('/api/files/upload', {\n        method: 'POST',\n        body: formData,\n        onUploadProgress: progressEvent => {\n          const progress = Math.round(progressEvent.loaded * 100 / progressEvent.total);\n          setUploadProgress(progress);\n        }\n      });\n      if (!response.ok) {\n        throw new Error('Upload failed');\n      }\n      const result = await response.json();\n      console.log('Upload successful, server response:', result);\n      setSuccess(true);\n      setUploadProgress(100);\n      onUploadSuccess(result.file);\n    } catch (err) {\n      console.error('Upload error:', err);\n      setError(err.message || 'Failed to upload file');\n      setUploadProgress(0);\n    }\n  }, [allowedTypes, onUploadSuccess]);\n  const {\n    getRootProps,\n    getInputProps,\n    isDragActive\n  } = useDropzone({\n    onDrop,\n    accept: allowedTypes.join(','),\n    multiple: false\n  });\n  return /*#__PURE__*/_jsxDEV(Box, {\n    sx: {\n      width: '100%'\n    },\n    children: [error && /*#__PURE__*/_jsxDEV(Alert, {\n      severity: \"error\",\n      sx: {\n        mb: 2\n      },\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 9\n    }, this), success && /*#__PURE__*/_jsxDEV(Alert, {\n      severity: \"success\",\n      sx: {\n        mb: 2\n      },\n      children: \"File uploaded successfully!\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Paper, {\n      ...getRootProps(),\n      sx: {\n        p: 3,\n        border: '2px dashed',\n        borderColor: isDragActive ? 'primary.main' : 'grey.300',\n        backgroundColor: isDragActive ? 'action.hover' : 'background.paper',\n        cursor: 'pointer',\n        transition: 'all 0.2s ease',\n        '&:hover': {\n          borderColor: 'primary.main',\n          backgroundColor: 'action.hover'\n        }\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        ...getInputProps()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          display: 'flex',\n          flexDirection: 'column',\n          alignItems: 'center',\n          textAlign: 'center'\n        },\n        children: [/*#__PURE__*/_jsxDEV(CloudUploadIcon, {\n          sx: {\n            fontSize: 48,\n            color: 'primary.main',\n            mb: 2\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h6\",\n          gutterBottom: true,\n          children: isDragActive ? 'Drop the file here' : 'Drag and drop a file here, or click to select'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"body2\",\n          color: \"text.secondary\",\n          children: \"Supported formats: CSV, JSON, and text files\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }, this), uploadProgress > 0 && /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        mt: 2\n      },\n      children: [/*#__PURE__*/_jsxDEV(LinearProgress, {\n        variant: \"determinate\",\n        value: uploadProgress\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"body2\",\n        color: \"text.secondary\",\n        align: \"center\",\n        sx: {\n          mt: 1\n        },\n        children: [uploadProgress, \"% uploaded\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 67,\n    columnNumber: 5\n  }, this);\n}\n_s(FileUploader, \"+j8df7RaK1vTjshvKNSxa1eTCTQ=\", false, function () {\n  return [useDropzone];\n});\n_c = FileUploader;\nexport default FileUploader;\nvar _c;\n$RefreshReg$(_c, \"FileUploader\");","map":{"version":3,"names":["React","useCallback","useState","useDropzone","Box","Typography","LinearProgress","Alert","Paper","CloudUploadIcon","jsxDEV","_jsxDEV","FileUploader","onUploadSuccess","allowedTypes","_s","uploadProgress","setUploadProgress","error","setError","success","setSuccess","onDrop","acceptedFiles","file","console","log","includes","type","join","formData","FormData","append","response","fetch","method","body","onUploadProgress","progressEvent","progress","Math","round","loaded","total","ok","Error","result","json","err","message","getRootProps","getInputProps","isDragActive","accept","multiple","sx","width","children","severity","mb","fileName","_jsxFileName","lineNumber","columnNumber","p","border","borderColor","backgroundColor","cursor","transition","display","flexDirection","alignItems","textAlign","fontSize","color","variant","gutterBottom","mt","value","align","_c","$RefreshReg$"],"sources":["E:/git_projects/DataVizPro/frontend/src/components/file/FileUploader.js"],"sourcesContent":["import React, { useCallback, useState } from 'react';\r\nimport { useDropzone } from 'react-dropzone';\r\nimport {\r\n  Box,\r\n  Typography,\r\n  LinearProgress,\r\n  Alert,\r\n  Paper,\r\n} from '@mui/material';\r\nimport CloudUploadIcon from '@mui/icons-material/CloudUpload';\r\n\r\nfunction FileUploader({ onUploadSuccess, allowedTypes }) {\r\n  const [uploadProgress, setUploadProgress] = useState(0);\r\n  const [error, setError] = useState(null);\r\n  const [success, setSuccess] = useState(false);\r\n\r\n  const onDrop = useCallback(async (acceptedFiles) => {\r\n    const file = acceptedFiles[0]; // Handle one file at a time\r\n    console.log('File dropped:', file);\r\n    \r\n    if (!allowedTypes.includes(file.type)) {\r\n      setError(`File type not supported. Please upload ${allowedTypes.join(', ')} files.`);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setError(null);\r\n      setSuccess(false);\r\n      setUploadProgress(0);\r\n\r\n      const formData = new FormData();\r\n      formData.append('file', file);\r\n\r\n      console.log('Uploading file to server...');\r\n      const response = await fetch('/api/files/upload', {\r\n        method: 'POST',\r\n        body: formData,\r\n        onUploadProgress: (progressEvent) => {\r\n          const progress = Math.round((progressEvent.loaded * 100) / progressEvent.total);\r\n          setUploadProgress(progress);\r\n        },\r\n      });\r\n\r\n      if (!response.ok) {\r\n        throw new Error('Upload failed');\r\n      }\r\n\r\n      const result = await response.json();\r\n      console.log('Upload successful, server response:', result);\r\n      setSuccess(true);\r\n      setUploadProgress(100);\r\n      onUploadSuccess(result.file);\r\n    } catch (err) {\r\n      console.error('Upload error:', err);\r\n      setError(err.message || 'Failed to upload file');\r\n      setUploadProgress(0);\r\n    }\r\n  }, [allowedTypes, onUploadSuccess]);\r\n\r\n  const { getRootProps, getInputProps, isDragActive } = useDropzone({\r\n    onDrop,\r\n    accept: allowedTypes.join(','),\r\n    multiple: false,\r\n  });\r\n\r\n  return (\r\n    <Box sx={{ width: '100%' }}>\r\n      {error && (\r\n        <Alert severity=\"error\" sx={{ mb: 2 }}>\r\n          {error}\r\n        </Alert>\r\n      )}\r\n      \r\n      {success && (\r\n        <Alert severity=\"success\" sx={{ mb: 2 }}>\r\n          File uploaded successfully!\r\n        </Alert>\r\n      )}\r\n\r\n      <Paper\r\n        {...getRootProps()}\r\n        sx={{\r\n          p: 3,\r\n          border: '2px dashed',\r\n          borderColor: isDragActive ? 'primary.main' : 'grey.300',\r\n          backgroundColor: isDragActive ? 'action.hover' : 'background.paper',\r\n          cursor: 'pointer',\r\n          transition: 'all 0.2s ease',\r\n          '&:hover': {\r\n            borderColor: 'primary.main',\r\n            backgroundColor: 'action.hover',\r\n          },\r\n        }}\r\n      >\r\n        <input {...getInputProps()} />\r\n        <Box\r\n          sx={{\r\n            display: 'flex',\r\n            flexDirection: 'column',\r\n            alignItems: 'center',\r\n            textAlign: 'center',\r\n          }}\r\n        >\r\n          <CloudUploadIcon\r\n            sx={{ fontSize: 48, color: 'primary.main', mb: 2 }}\r\n          />\r\n          <Typography variant=\"h6\" gutterBottom>\r\n            {isDragActive\r\n              ? 'Drop the file here'\r\n              : 'Drag and drop a file here, or click to select'}\r\n          </Typography>\r\n          <Typography variant=\"body2\" color=\"text.secondary\">\r\n            Supported formats: CSV, JSON, and text files\r\n          </Typography>\r\n        </Box>\r\n      </Paper>\r\n\r\n      {uploadProgress > 0 && (\r\n        <Box sx={{ mt: 2 }}>\r\n          <LinearProgress variant=\"determinate\" value={uploadProgress} />\r\n          <Typography variant=\"body2\" color=\"text.secondary\" align=\"center\" sx={{ mt: 1 }}>\r\n            {uploadProgress}% uploaded\r\n          </Typography>\r\n        </Box>\r\n      )}\r\n    </Box>\r\n  );\r\n}\r\n\r\nexport default FileUploader; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}